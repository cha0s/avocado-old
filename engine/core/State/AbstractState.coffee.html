<!DOCTYPE html><html><head><title>AbstractState.coffee</title><meta http-equiv="Content-Type" content="text/html" charset="UTF-8"><link rel="stylesheet" media="all" href="../../../docco.css"></head><body><div id="container"><div id="background"></div><div id="jump_to">Jump To &hellip;<div id="jump_wrapper"><div id="jump_page"><a href="../../../index.html" class="source"><span class="file_name">README</span></a><a href="../../../engine/core/CoreService.coffee.html" class="source "><span class="base_path">engine / core / </span><span class="file_name">CoreService.coffee</span></a><a href="../../../engine/core/Extension/String.coffee.html" class="source "><span class="base_path">engine / core / Extension / </span><span class="file_name">String.coffee</span></a><a href="../../../engine/core/Extension/Vector.coffee.html" class="source "><span class="base_path">engine / core / Extension / </span><span class="file_name">Vector.coffee</span></a><a href="../../../engine/core/Graphics/Image.coffee.html" class="source "><span class="base_path">engine / core / Graphics / </span><span class="file_name">Image.coffee</span></a><a href="../../../engine/core/Main.coffee.html" class="source "><span class="base_path">engine / core / </span><span class="file_name">Main.coffee</span></a><a href="../../../engine/core/Sound/Music.coffee.html" class="source "><span class="base_path">engine / core / Sound / </span><span class="file_name">Music.coffee</span></a><a href="../../../engine/core/Sound/Sample.coffee.html" class="source "><span class="base_path">engine / core / Sound / </span><span class="file_name">Sample.coffee</span></a><a href="../../../engine/core/State/AbstractState.coffee.html" class="source selected"><span class="base_path">engine / core / State / </span><span class="file_name">AbstractState.coffee</span></a><a href="../../../engine/core/State/Initial.coffee.html" class="source "><span class="base_path">engine / core / State / </span><span class="file_name">Initial.coffee</span></a><a href="../../../engine/core/Timing/Counter.coffee.html" class="source "><span class="base_path">engine / core / Timing / </span><span class="file_name">Counter.coffee</span></a><a href="../../../engine/core/Timing/Cps.coffee.html" class="source "><span class="base_path">engine / core / Timing / </span><span class="file_name">Cps.coffee</span></a><a href="../../../engine/core/Timing/Ticker.coffee.html" class="source "><span class="base_path">engine / core / Timing / </span><span class="file_name">Ticker.coffee</span></a><a href="../../../engine/core/Timing/TimingService.coffee.html" class="source "><span class="base_path">engine / core / Timing / </span><span class="file_name">TimingService.coffee</span></a><a href="../../../engine/core/Ui/UiService.coffee.html" class="source "><span class="base_path">engine / core / Ui / </span><span class="file_name">UiService.coffee</span></a><a href="../../../engine/core/Ui/Window.coffee.html" class="source "><span class="base_path">engine / core / Ui / </span><span class="file_name">Window.coffee</span></a><a href="../../../engine/core/Utility/EventEmitter.coffee.html" class="source "><span class="base_path">engine / core / Utility / </span><span class="file_name">EventEmitter.coffee</span></a><a href="../../../engine/core/Utility/Logger.coffee.html" class="source "><span class="base_path">engine / core / Utility / </span><span class="file_name">Logger.coffee</span></a><a href="../../../engine/core/Utility/Mixin.coffee.html" class="source "><span class="base_path">engine / core / Utility / </span><span class="file_name">Mixin.coffee</span></a><a href="../../../engine/core/Utility/Transition.coffee.html" class="source "><span class="base_path">engine / core / Utility / </span><span class="file_name">Transition.coffee</span></a><a href="../../../engine/core/Utility/underscore-min.js.html" class="source "><span class="base_path">engine / core / Utility / </span><span class="file_name">underscore-min.js</span></a><a href="../../../engine/core/Utility/upon.js.html" class="source "><span class="base_path">engine / core / Utility / </span><span class="file_name">upon.js</span></a><a href="../../../engine/main/native/Finish.coffee.html" class="source "><span class="base_path">engine / main / native / </span><span class="file_name">Finish.coffee</span></a><a href="../../../engine/main/native/Initialize.coffee.html" class="source "><span class="base_path">engine / main / native / </span><span class="file_name">Initialize.coffee</span></a><a href="../../../engine/main/native/Main.coffee.html" class="source "><span class="base_path">engine / main / native / </span><span class="file_name">Main.coffee</span></a></div></div></div><table cellpadding="0" cellspacing="0"><thead><tr><th class="docs"><h1>AbstractState.coffee</h1><div class="filepath">engine/core/State/</div></th><th class="code"></th></tr></thead><tbody><tr id="section-1"><td class="docs"><div class="pilwrap"><a href="#section-1" class="pilcrow">&#182;</a></div><p>avo.<strong>AbstractState</strong> is the abstract class which all states in the Avocado
engine extend.</p>

<p>Avocado is always in a State, except during the initialization phase, and
shortly before exiting the engine.</p>

<p>States will never be destroyed during the lifecycle of the engine. Remember
this, as it means that no child objects will be garbage collected unless
you delete them!</p>
</td><td class="code"><div class="highlight"><pre><span class="k">class</span> <span class="nx">avo</span><span class="p">.</span><span class="nx">AbstractState</span>
  </pre></div></td></tr><tr id="section-2"><td class="docs"><div class="pilwrap"><a href="#section-2" class="pilcrow">&#182;</a></div><p>When the state is first loaded, initialize is called. This is used to
initialize the State. You can load resources that are to remain as
persistent for the life of the application.</p>
</td><td class="code"><div class="highlight"><pre>  <span class="nv">initialize: </span><span class="nf">(args) -&gt;</span>
    </pre></div></td></tr><tr id="section-3"><td class="docs"><div class="pilwrap"><a href="#section-3" class="pilcrow">&#182;</a></div><p>By default, a State just immediately resolves its initialization
promise.</p>
</td><td class="code"><div class="highlight"><pre>    <span class="nv">defer = </span><span class="nx">upon</span><span class="p">.</span><span class="nx">defer</span><span class="p">()</span>
    <span class="nx">defer</span><span class="p">.</span><span class="nx">resolve</span><span class="p">()</span>
    <span class="nx">defer</span><span class="p">.</span><span class="nx">promise</span>
  </pre></div></td></tr><tr id="section-4"><td class="docs"><div class="pilwrap"><a href="#section-4" class="pilcrow">&#182;</a></div><p>When the State is entered by the engine, enter is called. You can use
this to register input handlers and load resources that should be loaded
every time this State is entered by the engine. After this State is
entered, it becomes the active State.</p>
</td><td class="code"><div class="highlight"><pre>  <span class="nv">enter: </span><span class="nf">(args, previousStateName) -&gt;</span>
    </pre></div></td></tr><tr id="section-5"><td class="docs"><div class="pilwrap"><a href="#section-5" class="pilcrow">&#182;</a></div><p>By default, a State just immediately resolves its enter promise.</p>
</td><td class="code"><div class="highlight"><pre>    <span class="nv">defer = </span><span class="nx">upon</span><span class="p">.</span><span class="nx">defer</span><span class="p">()</span>
    <span class="nx">defer</span><span class="p">.</span><span class="nx">resolve</span><span class="p">()</span>
    <span class="nx">defer</span><span class="p">.</span><span class="nx">promise</span>
  </pre></div></td></tr><tr id="section-6"><td class="docs"><div class="pilwrap"><a href="#section-6" class="pilcrow">&#182;</a></div><p>Tick is called repeatedly by the engine while this State is the active
State. This is where the game is updated. You might run your enemy
behavior logic here, for instance.</p>
</td><td class="code"><div class="highlight"><pre>  <span class="nv">tick: </span><span class="o">-&gt;</span>
  </pre></div></td></tr><tr id="section-7"><td class="docs"><div class="pilwrap"><a href="#section-7" class="pilcrow">&#182;</a></div><p>Render is called repeatedly by the engine while this State is the active
State. This is where the game is displayed. Render graphics to the buffer
so they will appear in the game window.</p>
</td><td class="code"><div class="highlight"><pre>  <span class="nv">render: </span><span class="nf">(buffer) -&gt;</span></pre></div></td></tr><tr id="section-8"><td class="docs"><div class="pilwrap"><a href="#section-8" class="pilcrow">&#182;</a></div><p>Called when the engine loads another State. This gives the State an
opportunity to clean up any resources loaded or input handlers loaded
or registered in enter().</p>
</td><td class="code"><div class="highlight"><pre>  <span class="nv">leave: </span><span class="o">-&gt;</span>

</pre></div></td></tr></tbody></table><div id="projectname"><a href="../../../index.html">Avocado</a></div></div></body></html>